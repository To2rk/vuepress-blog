{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[101],{681:function(s,t,a){\"use strict\";a.r(t);var e=a(10),n=Object(e.a)({},(function(){var s=this,t=s.$createElement,a=s._self._c||t;return a(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[a(\"h2\",{attrs:{id:\"开机自动挂载linux系统\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#开机自动挂载linux系统\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"开机自动挂载Linux系统\")])]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"与Linux Deploy软件是否自启无关\")])]),s._v(\" \"),a(\"ol\",[a(\"li\",[s._v(\"用USB连接手机后，启动adb工具\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"adb.exe shell\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"su\")]),s._v(\"        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 注意手机上允许root权限\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ls\")]),s._v(\"        \"),a(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"## 可以看到 init.rc \")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mount\")]),s._v(\" -o rw,remount /system\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"2\"}},[a(\"li\",[a(\"strong\",[s._v(\"在/system/bin/目录下找到一个sh脚本，并且要确保该sh脚本是被写入在init.rc中启动\")])])]),s._v(\" \"),a(\"p\",[a(\"strong\",[s._v(\"注意\")]),s._v(\"：务必确保 \"),a(\"code\",[s._v(\"xxxx.sh\")]),s._v(\" 存在于init.rc中（init.rc位于根目录,上面执行ls命令后可以看到）\")]),s._v(\" \"),a(\"p\",[s._v(\"例如，我找到一个\"),a(\"code\",[s._v(\"xxxx.sh\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"vi\")]),s._v(\" xxxx.sh\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"3\"}},[a(\"li\",[s._v(\"在最后加上以下内容\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"30\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"nohup\")]),s._v(\" /data/user/0/ru.meefik.linuxdeploy/files/bin/linuxdeploy -p debian start -m \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"/dev/null \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a(\"span\",{pre:!0,attrs:{class:\"token file-descriptor important\"}},[s._v(\"2\")]),s._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token file-descriptor important\"}},[s._v(\"&1\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"p\",[a(\"strong\",[s._v(\"注意\")]),s._v(\"：以下为要改动的地方\")]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[s._v(\"sleep 30\")]),s._v(\"：最好有，秒数最好大一些，不然可能无法自启成功；\")]),s._v(\" \"),a(\"li\",[a(\"code\",[s._v(\"/data/user/0/ru.meefik.linuxdeploy/files/bin/linuxdeploy\")]),s._v(\"： ENV 目录，\"),a(\"code\",[s._v(\"/bin/linuxdeploy\")]),s._v(\"不要忘记；\")]),s._v(\" \"),a(\"li\",[s._v(\"下图中 \"),a(\"code\",[s._v(\"NV 目录\")]),s._v(\" 为：\"),a(\"code\",[s._v(\"/data/user/0/ru.meefik.linuxdeploy/files\")]),s._v(\"，没有错\")])]),s._v(\" \"),a(\"p\",[a(\"img\",{attrs:{src:\"https://conimi.com/files/images/screenshots/Linux-delpoy-setting-ENV-DIR.jpg\",alt:\"Linux-delpoy-setting-ENV-DIR\"}})]),s._v(\" \"),a(\"ul\",[a(\"li\",[a(\"code\",[s._v(\"debian\")]),s._v(\"：配置文件名，也就是下图中ip左边的名字\\n\"),a(\"img\",{attrs:{src:\"https://conimi.com/files/images/screenshots/linux-deploy-container-name.jpg\",alt:\"linux-deploy-container-name\"}})])]),s._v(\" \"),a(\"ol\",{attrs:{start:\"4\"}},[a(\"li\",[a(\"strong\",[s._v(\"开机自启adbd网络调试（不需要的话直接跳过，到第5步）\")])])]),s._v(\" \"),a(\"p\",[s._v(\"按照上面找到的\"),a(\"code\",[s._v(\"xxxx.sh\")]),s._v(\"，再加上以下内容\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"su\")]),s._v(\"\\nsetprop service.adb.tcp.port \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5555\")]),s._v(\"\\nstop adbd\\nstart adbd\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"5\"}},[a(\"li\",[s._v(\"操作完之后，把文件改回只读属性\")])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mount\")]),s._v(\" -o ro,remount /system\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"ol\",{attrs:{start:\"6\"}},[a(\"li\",[a(\"p\",[s._v(\"重新启动后就可以实现自动启动Linux Deploy中的Linux系统了（若没有添加网络调试，就结束了）\")])]),s._v(\" \"),a(\"li\",[a(\"p\",[s._v(\"然后用adb工具查看是否自启了（只需要知道手机内网ip就可以，不需要再连接USB了）\")])])]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[s._v(\"adb connect \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".1.100:5555\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"h2\",{attrs:{id:\"以下记录实现的过程\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#以下记录实现的过程\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"以下记录实现的过程\")])]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_0x10-尝试了往-system-bin-里面加脚本\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x10-尝试了往-system-bin-里面加脚本\"}},[s._v(\"#\")]),s._v(\" 0x10 尝试了往/system/bin/里面加脚本\")]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"失败，该目录下脚本并不会自动执行\")])]),s._v(\" \"),a(\"p\",[s._v(\"先把/system/挂在为可读写，再创建一个script.sh文件，并赋予权限、更改用户组\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"touch\")]),s._v(\" /system/bin/script.sh\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chmod\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"755\")]),s._v(\" script.sh\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"chown\")]),s._v(\" root:shell script.sh\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\")])]),a(\"p\",[s._v(\"其中script.sh内容为\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sleep\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"30\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"nohup\")]),s._v(\" /data/user/0/ru.meefik.linuxdeploy/files/bin/linuxdeploy -p debian start -m \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\">\")]),s._v(\"/dev/null \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[a(\"span\",{pre:!0,attrs:{class:\"token file-descriptor important\"}},[s._v(\"2\")]),s._v(\">\")]),a(\"span\",{pre:!0,attrs:{class:\"token file-descriptor important\"}},[s._v(\"&1\")]),s._v(\" \"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"p\",[s._v(\"但是\"),a(\"code\",[s._v(\"/system/bin/\")]),s._v(\"下的脚本并不会开机自动执行，所有又想到了下面这种方式\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_0x20-尝试了往init-rc加启动脚本\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x20-尝试了往init-rc加启动脚本\"}},[s._v(\"#\")]),s._v(\" 0x20 尝试了往init.rc加启动脚本\")]),s._v(\" \"),a(\"blockquote\",[a(\"p\",[s._v(\"失败，重启后init.rc文件会恢复到被修改之前\")])]),s._v(\" \"),a(\"p\",[s._v(\"先找到\"),a(\"code\",[s._v(\"init.rc\")]),s._v(\"的位置，存在\"),a(\"code\",[s._v(\"/\")]),s._v(\"目录下\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"find\")]),s._v(\" -name \"),a(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'init*.rc'\")]),s._v(\"\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\")])]),a(\"p\",[s._v(\"将 \"),a(\"code\",[s._v(\"\\\\\")]),s._v(\" 目录挂在为可读写\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"su\")]),s._v(\"\\n\"),a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"mount\")]),s._v(\" -o rw,remount /\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\")])]),a(\"p\",[s._v(\"往init.rc内加上了以下内容\")]),s._v(\" \"),a(\"div\",{staticClass:\"language-sh line-numbers-mode\"},[a(\"pre\",{pre:!0,attrs:{class:\"language-sh\"}},[a(\"code\",[a(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"service\")]),s._v(\" my_script/system/bin/script.sh\\n    user root\\n    group root\\n    disabled\\n    seclabel u:r:shell:s0\\n\\non property:sys.boot_completed\"),a(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"=\")]),a(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"\\n    start my_script\\n\")])]),s._v(\" \"),a(\"div\",{staticClass:\"line-numbers-wrapper\"},[a(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),a(\"br\"),a(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),a(\"br\")])]),a(\"p\",[s._v(\"重启，发现还是无法启动，后来发现init.rc这个文件是直接修改是无法成功的，每次重启都会恢复到原来的样子\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_0x30-尝试了使用app实现间接调用\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x30-尝试了使用app实现间接调用\"}},[s._v(\"#\")]),s._v(\" 0x30 尝试了使用app实现间接调用\")]),s._v(\" \"),a(\"p\",[s._v(\"失败，这种方式应该也可以实现，但是感觉太麻烦了，放弃了\")]),s._v(\" \"),a(\"h3\",{attrs:{id:\"_0x40-分析init-rc\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x40-分析init-rc\"}},[s._v(\"#\")]),s._v(\" 0x40 分析init.rc\")]),s._v(\" \"),a(\"p\",[s._v(\"既然init.rc这个文件变不了，那就看看里面到底写了什么，通过分析发现，里面的一个脚本\"),a(\"code\",[s._v(\"xxxx.sh\")]),s._v(\"被执行了，而且这个脚本xxxx.sh还存在\"),a(\"code\",[s._v(\"/system/bin/\")]),s._v(\"目录下，而\"),a(\"code\",[s._v(\"/system/bin/\")]),s._v(\"是可以修改成功的，所以最后直接往\"),a(\"code\",[s._v(\"xxxx.sh\")]),s._v(\"里面加上需要启动的脚本。\")]),s._v(\" \"),a(\"h2\",{attrs:{id:\"参考资料\"}},[a(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#参考资料\"}},[s._v(\"#\")]),s._v(\" \"),a(\"strong\",[s._v(\"参考资料\")])]),s._v(\" \"),a(\"ul\",[a(\"li\",[s._v(\"Linux权限详解（chmod、600、644、666、700、711、755、777、4755、6755、7755）：\"),a(\"a\",{attrs:{href:\"https://blog.csdn.net/u013197629/article/details/73608613\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://blog.csdn.net/u013197629/article/details/73608613\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"[N1盒子] 已解决：linux deploy Debian9 中安装的应用如何设置自启：\"),a(\"a\",{attrs:{href:\"https://www.right.com.cn/forum/thread-325849-1-1.html\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://www.right.com.cn/forum/thread-325849-1-1.html\"),a(\"OutboundLink\")],1)]),s._v(\" \"),a(\"li\",[s._v(\"How can I connect to Android with ADB over TCP? [closed]：\"),a(\"a\",{attrs:{href:\"https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://stackoverflow.com/questions/2604727/how-can-i-connect-to-android-with-adb-over-tcp\"),a(\"OutboundLink\")],1)])])])}),[],!1,null,null,null);t.default=n.exports}}]);","extractedComments":[]}