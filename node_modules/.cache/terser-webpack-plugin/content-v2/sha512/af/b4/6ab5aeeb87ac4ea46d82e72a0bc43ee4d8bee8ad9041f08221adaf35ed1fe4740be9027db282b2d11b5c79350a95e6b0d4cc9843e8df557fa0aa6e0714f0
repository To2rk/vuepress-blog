{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[47],{670:function(s,a,t){\"use strict\";t.r(a);var n=t(10),r=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"h2\",{attrs:{id:\"_0x00-创建目录结构-结合docker-compose使用\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-创建目录结构-结合docker-compose使用\"}},[s._v(\"#\")]),s._v(\" 0x00 创建目录结构，结合docker-compose使用\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"/home/workdir\\n    - compose\\n    -- nginx\\n        --- conf.d\\n        ---- default.conf\\n        --- log\\n        *** Dockerfile\\n        *** nginx.conf\\n    - wwwroot\\n    -- demo\\n        *** index.html\\n    * docker-compose.yml\\n\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 约定：\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#      - 表示目录\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#      * 表示文件\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"_0x01-编写dockerfile\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-编写dockerfile\"}},[s._v(\"#\")]),s._v(\" 0x01 编写Dockerfile\")]),s._v(\" \"),t(\"p\",[s._v(\"路径：\"),t(\"code\",[s._v(\"/home/workdir/compose/nginx/Dockerfile\")])]),s._v(\" \"),t(\"p\",[s._v(\"参考：https://github.com/fabiocicerchia/nginx-lua/blob/master/nginx/1.18.0/debian/10.2-slim\")]),s._v(\" \"),t(\"p\",[s._v(\"便于以后添加插件\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-dockerfile line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-dockerfile\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"FROM\")]),s._v(\" debian:10.2-slim\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" maintainer=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"info@fabiocicerchia.it\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" Author=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://github.com/fabiocicerchia/nginx-lua/blob/master/nginx/1.18.0/debian/10.2-slim\"')])]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ARG\")]),s._v(\" BUILD_DATE\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ARG\")]),s._v(\" BUILD_VERSION\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ARG\")]),s._v(\" VCS_REF\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.schema-version=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"1.0\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.build-date=\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$BUILD_DATE\")])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.name=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"fabiocicerchia/nginx-lua\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.description=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"Nginx 1.18.0 with LUA support based on debian 10.2-slim.\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.url=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://github.com/fabiocicerchia/nginx-lua\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.vcs-url=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"https://github.com/fabiocicerchia/nginx-lua\"')])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.vcs-ref=\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$VCS_REF\")])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.version=\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$BUILD_VERSION\")])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"LABEL\")]),s._v(\" org.label-schema.docker.cmd=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"docker run -p 80:80 -d fabiocicerchia/nginx-lua:1.18.0-debian10.2-slim\"')])]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/openresty/luajit2\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_LUAJIT 2.1-20200102\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/openresty/lua-nginx-module\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Production ready.\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_LUA_NGINX_MODULE 0.10.15\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/openresty/lua-resty-core\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# This library is production ready.\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_LUA_RESTY_CORE 0.1.17\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" LUA_LIB_DIR /usr/local/share/lua/5.1\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/openresty/lua-resty-lrucache\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# This library is considered production ready.\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_LUA_RESTY_LRUCACHE 0.09\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/nginx/nginx\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_NGINX 1.18.0\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/vision5/ngx_devel_kit\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# The NDK is now considered to be stable.\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_NGX_DEVEL_KIT 0.3.1\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# https://github.com/Yelp/dumb-init\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" VER_DUMBINIT 1.2.2\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" LUAJIT_LIB /usr/local/lib\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" LUAJIT_INC /usr/local/include/luajit-2.1\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" LD_LIBRARY_PATH /usr/local/lib/:\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$LD_LIBRARY_PATH\")])]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENV\")]),s._v(\" DEBIAN_FRONTEND noninteractive\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"RUN\")]),s._v(\" set -x \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& apt-get update \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& apt-get install -y --no-install-recommends --no-install-suggests \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    ca-certificates \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    libgeoip-dev \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    libpcre3-dev \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    libssl-dev \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    zlib1g-dev \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& apt-get install -y --no-install-recommends --no-install-suggests \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    curl \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    g++ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    gzip \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    make \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    tar \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# OpenResty LUAJIT2\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /luajit.tar.gz https://github.com/openresty/luajit2/archive/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUAJIT}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /luajit.tar.gz && rm /luajit.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd /luajit2-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUAJIT}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make -j \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"$(nproc)\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make install \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd / \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# LUA Resty Core\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /lua-resty-core.tar.gz https://github.com/openresty/lua-resty-core/archive/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_CORE}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /lua-resty-core.tar.gz && rm /lua-resty-core.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd /lua-resty-core-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_CORE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make -j \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"$(nproc)\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make install \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd / \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# LUA Resty LRUCache\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /lua-resty-lrucache.tar.gz https://github.com/openresty/lua-resty-lrucache/archive/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_LRUCACHE}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /lua-resty-lrucache.tar.gz && rm /lua-resty-lrucache.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd /lua-resty-lrucache-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_LRUCACHE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make -j \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"$(nproc)\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make install \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd / \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# NGX Devel Kit\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /ngx_devel_kit.tar.gz https://github.com/vision5/ngx_devel_kit/archive/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGX_DEVEL_KIT}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /ngx_devel_kit.tar.gz && rm /ngx_devel_kit.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Lua Nginx Module\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /lua-nginx.tar.gz https://github.com/openresty/lua-nginx-module/archive/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_NGINX_MODULE}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /lua-nginx.tar.gz && rm /lua-nginx.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# NGINX\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# create nginx user/group first, to be consistent throughout docker variants\")]),s._v(\"\\n&& addgroup --system --gid 32548 nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& adduser --system --disabled-login --ingroup nginx --no-create-home --home /nonexistent --gecos \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"nginx user\"')]),s._v(\" --shell /bin/false --uid 32548 nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# we're on an architecture upstream doesn't officially build for\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# let's build binaries from the published packaging sources\")]),s._v(\"\\n    && curl -Lo /nginx.tar.gz https://nginx.org/download/nginx-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGINX}\")]),s._v(\".tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && tar xvzf /nginx.tar.gz && rm /nginx.tar.gz \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && cd /nginx-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGINX}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && mkdir -p /var/cache/nginx/client_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        /var/cache/nginx/proxy_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        /var/cache/nginx/fastcgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        /var/cache/nginx/uwsgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        /var/cache/nginx/scgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && ./configure \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --prefix=/etc/nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --sbin-path=/usr/sbin/nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --modules-path=/usr/lib/nginx/modules \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --conf-path=/etc/nginx/nginx.conf \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --error-log-path=/var/log/nginx/error.log \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-log-path=/var/log/nginx/access.log \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --pid-path=/var/run/nginx.pid \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --lock-path=/var/run/nginx.lock \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-client-body-temp-path=/var/cache/nginx/client_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-proxy-temp-path=/var/cache/nginx/proxy_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-fastcgi-temp-path=/var/cache/nginx/fastcgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-uwsgi-temp-path=/var/cache/nginx/uwsgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --http-scgi-temp-path=/var/cache/nginx/scgi_temp \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --user=nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --group=nginx \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-compat \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-file-aio \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-threads \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_addition_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_auth_request_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_dav_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_flv_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_gunzip_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_gzip_static_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_mp4_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_random_index_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_realip_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_secure_link_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_slice_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_ssl_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_stub_status_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_sub_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_v2_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-mail \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-mail_ssl_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-stream \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-stream_realip_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-stream_ssl_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-stream_ssl_preread_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-cc-opt=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'-g -O2 -fstack-protector-strong -Wformat -Werror=format-security -Wp,-D_FORTIFY_SOURCE=2 -fPIC'\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-ld-opt=\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'-Wl,-z,relro -Wl,-z,now -Wl,--as-needed -pie'\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --add-module=/lua-nginx-module-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_NGINX_MODULE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --add-module=/ngx_devel_kit-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGX_DEVEL_KIT}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_dav_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n        --with-http_geoip_module \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make -j \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"$(nproc)\"')]),s._v(\" build \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    && make install \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Bring in tzdata so users could set the timezones through the environment\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# variables\")]),s._v(\"\\n&& apt-get install -y --no-install-recommends --no-install-suggests tzdata \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Bring in curl and ca-certificates to make registering on DNS SD easier\")]),s._v(\"\\n&& apt-get install -y --no-install-recommends --no-install-suggests curl ca-certificates \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# forward request and error logs to docker log collector\")]),s._v(\"\\n&& ln -sf /dev/stdout /var/log/nginx/access.log \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& ln -sf /dev/stderr /var/log/nginx/error.log \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# dumb-init\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& curl -Lo /usr/bin/dumb-init https://github.com/Yelp/dumb-init/releases/download/v\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_DUMBINIT}\")]),s._v(\"/dumb-init_\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_DUMBINIT}\")]),s._v(\"_x86_64 \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& chmod +x /usr/bin/dumb-init \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Cleanup\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# ##############################################################################\")]),s._v(\"\\n&& rm -rf /lua-nginx-module-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_NGINX_MODULE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /lua-resty-core-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_CORE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /lua-resty-lrucache-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUA_RESTY_LRUCACHE}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /luajit2-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_LUAJIT}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /nginx-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGINX}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /ngx_devel_kit-\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"${VER_NGX_DEVEL_KIT}\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& apt-get autoremove -y \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& apt-get remove -y \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    curl \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    g++ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n    make \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"\\\\\")]),s._v(\"\\n&& rm -rf /var/lib/apt/lists/*\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"HEALTHCHECK\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token options\"}},[t(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"--interval\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"30s\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token property\"}},[s._v(\"--timeout\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"=\")]),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"3s\")])]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"CMD\")]),s._v(\" curl --fail http://localhost/ || exit 1\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"EXPOSE\")]),s._v(\" 80\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"EXPOSE\")]),s._v(\" 443\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"STOPSIGNAL\")]),s._v(\" SIGTERM\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ENTRYPOINT\")]),s._v(\" [\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dumb-init\"')]),s._v(\"]\")]),s._v(\"\\n\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token instruction\"}},[t(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"CMD\")]),s._v(\" [\"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"nginx\"')]),s._v(\", \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"-g\"')]),s._v(\", \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"daemon off;\"')]),s._v(\"]\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"48\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"49\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"50\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"51\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"52\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"53\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"54\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"55\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"56\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"57\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"58\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"59\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"60\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"61\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"62\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"63\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"64\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"65\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"66\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"67\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"68\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"69\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"70\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"71\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"72\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"73\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"74\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"75\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"76\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"77\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"78\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"79\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"80\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"81\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"82\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"83\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"84\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"85\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"86\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"87\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"88\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"89\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"90\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"91\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"92\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"93\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"94\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"95\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"96\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"97\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"98\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"99\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"100\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"101\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"102\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"103\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"104\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"105\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"106\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"107\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"108\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"109\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"110\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"111\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"112\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"113\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"114\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"115\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"116\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"117\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"118\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"119\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"120\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"121\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"122\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"123\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"124\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"125\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"126\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"127\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"128\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"129\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"130\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"131\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"132\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"133\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"134\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"135\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"136\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"137\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"138\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"139\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"140\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"141\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"142\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"143\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"144\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"145\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"146\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"147\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"148\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"149\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"150\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"151\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"152\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"153\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"154\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"155\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"156\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"157\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"158\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"159\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"160\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"161\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"162\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"163\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"164\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"165\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"166\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"167\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"168\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"169\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"170\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"171\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"172\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"173\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"174\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"175\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"176\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"177\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"178\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"179\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"180\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"181\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"182\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"183\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"184\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"185\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"186\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"187\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"188\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"189\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"190\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"191\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"192\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"193\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"194\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"195\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"196\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"_0x02-编写docker-compose-yml\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-编写docker-compose-yml\"}},[s._v(\"#\")]),s._v(\" 0x02 编写docker-compose.yml\")]),s._v(\" \"),t(\"p\",[s._v(\"路径：\"),t(\"code\",[s._v(\"/home/workdir/docker-compose.yml\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-docker line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-docker\"}},[t(\"code\",[s._v('version: \"3.7\"\\n\\nservices:\\n    nginx:\\n        build:\\n            context: .\\n            dockerfile: compose/nginx/Dockerfile\\n        restart: always\\n        container_name: nginx\\n        volumes:\\n            - ./wwwroot/demo:/home/wwwroot\\n            - ./compose/nginx/conf.d:/etc/nginx/conf.d\\n            - ./compose/nginx/nginx.conf:/etc/nginx/nginx.conf\\n            - ./compose/nginx/log:/var/log/nginx\\n\\n            '),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 需要注意：主机文件挂载到容器内存在几种形式\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 1. 用主机内的文件替换容器内的文件，比如容器内存在nginx.conf，主机内也存在nginx.conf，\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 这时需要用容器的文件代替主机文件，./compose/nginx/nginx.conf:/etc/nginx/nginx.conf就会覆盖容器内的原有文件\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 2. 将主机文件夹下的文件全部挂载到容器内，比如将主机内的/home/wwwroot/demo下的所有文件映射到容器，\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 这时./wwwroot/demo:/home/wwwroot就会在容器内创建一个/home/wwwroot文件夹，主机demo文件夹内的所有文件都会映射到容器/home/wwwroot文件夹下\")]),s._v(\"\\n            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 3. 将容器内的文件夹挂载到主机，比如容器内/var/log/nginx文件下的日志文件会全部映射到主机./compose/nginx/log文件夹下\")]),s._v('\\n\\n        ports:\\n            - \"80:80\"\\n')])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"_0x03-启动\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-启动\"}},[s._v(\"#\")]),s._v(\" 0x03 启动\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"cd\")]),s._v(\" /home/workdir\\ndocker-compose up\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])])])}),[],!1,null,null,null);a.default=r.exports}}]);","extractedComments":[]}