{"code":"(window.webpackJsonp=window.webpackJsonp||[]).push([[75],{638:function(s,t,n){\"use strict\";n.r(t);var a=n(10),e=Object(a.a)({},(function(){var s=this,t=s.$createElement,n=s._self._c||t;return n(\"ContentSlotsDistributor\",{attrs:{\"slot-key\":s.$parent.slotKey}},[n(\"p\",[s._v(\"在2017年05月20日写了一篇文章记录了手动申请SSL加密证书和相关配置信息，还包括301重定向；\\n文章地址：\"),n(\"a\",{attrs:{href:\"https://conimi.com/archives/20\",target:\"_blank\",rel:\"noopener noreferrer\"}},[s._v(\"https://conimi.com/archives/20\"),n(\"OutboundLink\")],1)]),s._v(\" \"),n(\"p\",[s._v(\"这篇文章将记录在\"),n(\"code\",[s._v(\"LNMP环境\")]),s._v(\"下实现SSL加密和301重定向的过程\")]),s._v(\" \"),n(\"p\",[s._v(\"如果在创建虚拟主机时没有添加SSL加密证书，使用命令 \"),n(\"code\",[s._v(\"lnmp ssl add\")]),s._v(\" 可以添加域名证书，并实现自动续期。\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"设置301重定向\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#设置301重定向\"}},[s._v(\"#\")]),s._v(\" 设置301重定向\")]),s._v(\" \"),n(\"p\",[s._v(\"在\"),n(\"code\",[s._v(\"/usr/local/nginx/conf/vhost/\")]),s._v(\"目录下找到需要配置的文件，我的配置文件如下 ，需要三个server段\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_0x01-第一个server段\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x01-第一个server段\"}},[s._v(\"#\")]),s._v(\" 0x01 \"),n(\"strong\",[s._v(\"第一个server段\")])]),s._v(\" \"),n(\"p\",[s._v(\"实现了\"),n(\"code\",[s._v(\"http://www.nico.cc\")]),s._v(\"和\"),n(\"code\",[s._v(\"http://nico.cc\")]),s._v(\"跳转到\"),n(\"code\",[s._v(\"https://conimi.com\")])]),s._v(\" \"),n(\"div\",{staticClass:\"language-nginx line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-nginx\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server\")])]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"80\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" [::]:80\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server_name\")]),s._v(\" www.nico.cc nico.cc\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"301\")]),s._v(\" https://conimi.com\"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$request_uri\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\")])]),n(\"p\",[n(\"strong\",[s._v(\"注意\")]),s._v(\"：$request_uri 为必须设置的参数\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_0x02-第二个server段-实现了https-www-conimi-com跳转到https-conimi-com\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x02-第二个server段-实现了https-www-conimi-com跳转到https-conimi-com\"}},[s._v(\"#\")]),s._v(\" 0x02 \"),n(\"strong\",[s._v(\"第二个server段,实现了\"),n(\"code\",[s._v(\"https://www.conimi.com\")]),s._v(\"跳转到\"),n(\"code\",[s._v(\"https://conimi.com\")])])]),s._v(\" \"),n(\"div\",{staticClass:\"language-nginx line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-nginx\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server\")])]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"443\")]),s._v(\" ssl http2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" [::]:443 ssl http2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server_name\")]),s._v(\" www.conimi.com\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"return\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"301\")]),s._v(\" https://conimi.com\"),n(\"span\",{pre:!0,attrs:{class:\"token variable\"}},[s._v(\"$request_uri\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"on\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_certificate\")]),s._v(\" /usr/local/nginx/conf/ssl/www.conimi.com/fullchain.cer\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_certificate_key\")]),s._v(\" /usr/local/nginx/conf/ssl/www.conimi.com/www.conimi.com.key\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_session_timeout\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5m\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_protocols\")]),s._v(\" TLSv1 TLSv1.1 TLSv1.2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_prefer_server_ciphers\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"on\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_ciphers\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5\"')]),s._v(\"\\n    ssl_session_cache builtin:1000 shared:SSL:10m\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# openssl dhparam -out /usr/local/nginx/conf/ssl/dhparam.pem 2048\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_dhparam\")]),s._v(\" /usr/local/nginx/conf/ssl/dhparam.pem\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\")])]),n(\"p\",[n(\"strong\",[s._v(\"注意\")]),s._v(\"：需要添加SSL相关配置信息，否则无法访问\")]),s._v(\" \"),n(\"h3\",{attrs:{id:\"_0x03-第三个server段\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#_0x03-第三个server段\"}},[s._v(\"#\")]),s._v(\" 0x03 第三个server段\")]),s._v(\" \"),n(\"div\",{staticClass:\"language-nginx line-numbers-mode\"},[n(\"pre\",{pre:!0,attrs:{class:\"language-nginx\"}},[n(\"code\",[n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server\")])]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"443\")]),s._v(\" ssl http2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"listen\")]),s._v(\" [::]:443 ssl http2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"server_name\")]),s._v(\" conimi.com\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"index\")]),s._v(\" index.html index.htm index.php default.html default.htm default.php\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"root\")]),s._v(\"  /home/wwwroot/www.conimi.com\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"on\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_certificate\")]),s._v(\" /usr/local/nginx/conf/ssl/www.conimi.com/fullchain.cer\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_certificate_key\")]),s._v(\" /usr/local/nginx/conf/ssl/www.conimi.com/www.conimi.com.key\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_session_timeout\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"5m\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_protocols\")]),s._v(\" TLSv1 TLSv1.1 TLSv1.2\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_prefer_server_ciphers\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token boolean\"}},[s._v(\"on\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_ciphers\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token string\"}},[s._v('\"EECDH+CHACHA20:EECDH+CHACHA20-draft:EECDH+AES128:RSA+AES128:EECDH+AES256:RSA+AES256:EECDH+3DES:RSA+3DES:!MD5\"')])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_session_cache\")]),s._v(\" builtin:1000 shared:SSL:10m\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# openssl dhparam -out /usr/local/nginx/conf/ssl/dhparam.pem 2048\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"ssl_dhparam\")]),s._v(\" /usr/local/nginx/conf/ssl/dhparam.pem\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"include\")]),s._v(\" rewrite/typecho.conf\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#error_page   404   /404.html;\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"# Deny access to PHP files in specific directory\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token comment\"}},[s._v(\"#location ~ /(wp-content|uploads|wp-includes|images)/.*\\\\.php$ { deny all; }\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"include\")]),s._v(\" enable-php-pathinfo.conf\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"location\")]),s._v(\" ~ .*\\\\.(gif|jpg|jpeg|png|bmp|swf)$\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"expires\")]),s._v(\"      \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"30d\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"location\")]),s._v(\" ~ .*\\\\.(js|css)?$\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"expires\")]),s._v(\"      \"),n(\"span\",{pre:!0,attrs:{class:\"token number\"}},[s._v(\"12h\")])]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"location\")]),s._v(\" ~ /.well-known\")]),s._v(\" \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"allow\")]),s._v(\" all\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"location\")]),s._v(\" ~ /\\\\.\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"{\")]),s._v(\"\\n        \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"deny\")]),s._v(\" all\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\\n    \"),n(\"span\",{pre:!0,attrs:{class:\"token directive\"}},[n(\"span\",{pre:!0,attrs:{class:\"token keyword\"}},[s._v(\"access_log\")]),s._v(\"  /home/wwwlogs/www.conimi.com.log\")]),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\";\")]),s._v(\"\\n\"),n(\"span\",{pre:!0,attrs:{class:\"token punctuation\"}},[s._v(\"}\")]),s._v(\"\\n\")])]),s._v(\" \"),n(\"div\",{staticClass:\"line-numbers-wrapper\"},[n(\"span\",{staticClass:\"line-number\"},[s._v(\"1\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"2\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"3\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"4\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"5\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"6\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"7\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"8\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"9\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"10\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"11\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"12\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"13\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"14\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"15\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"16\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"17\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"18\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"19\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"20\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"21\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"22\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"23\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"24\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"25\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"26\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"27\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"28\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"29\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"30\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"31\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"32\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"33\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"34\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"35\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"36\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"37\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"38\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"39\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"40\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"41\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"42\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"43\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"44\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"45\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"46\")]),n(\"br\"),n(\"span\",{staticClass:\"line-number\"},[s._v(\"47\")]),n(\"br\")])]),n(\"p\",[n(\"strong\",[s._v(\"注意\")]),s._v(\"：SSL配置信息与第二段相同\")]),s._v(\" \"),n(\"h2\",{attrs:{id:\"rewrite和return两种重定向方式的区别\"}},[n(\"a\",{staticClass:\"header-anchor\",attrs:{href:\"#rewrite和return两种重定向方式的区别\"}},[s._v(\"#\")]),s._v(\" rewrite和return两种重定向方式的区别：\")]),s._v(\" \"),n(\"blockquote\",[n(\"p\",[s._v(\"第一种：使用\"),n(\"strong\",[s._v(\"rewrite\")]),s._v(\"：\"),n(\"code\",[s._v(\"rewrite ^(.*) https://conimi.com$1 permanent;\")]),n(\"br\"),s._v(\"\\n第二种：使用\"),n(\"strong\",[s._v(\"return\")]),s._v(\"： \"),n(\"code\",[s._v(\"return 301 https://conimi.com$request_uri;\")])])]),s._v(\" \"),n(\"ul\",[n(\"li\",[s._v(\"return性能更优，通过301状态码和$request_uri参数，直接告诉Nginx这是个301重定向和抓取指定URI。\")])])])}),[],!1,null,null,null);t.default=e.exports}}]);","extractedComments":[]}